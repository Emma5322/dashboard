<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FDM Racing Dashboard</title>

<!-- Librerías externas -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Orbitron', sans-serif;
    background-color: #0a0f1e;
    color: #fff;
    display: flex;
    height: 100vh;
}
.sidebar {
    width: 70px;
    background: #111827;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 20px;
    box-shadow: 2px 0 10px #00f0ff55;
}
.sidebar button {
    background: none;
    border: none;
    color: #777;
    font-size: 24px;
    margin: 20px 0;
    cursor: pointer;
    transition: 0.3s;
    text-shadow: 0 0 5px #00f0ff33;
}
.sidebar button:hover, .sidebar button.active {
    color: #0ff;
    text-shadow: 0 0 15px #0ff;
}
.content {
    flex: 1;
    padding: 20px;
    position: relative;
    overflow-y: auto;
}
.logo {
    position: absolute;
    top: 10px;
    left: 90px;
    font-size: 22px;
    color: #0ff;
    font-weight: bold;
    text-shadow: 0 0 20px #0ff;
}
.hidden { display: none; }
.gauges {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    margin-top: 60px;
}
canvas { background: #0a0f1e; border-radius: 10px; }
#speedChart { box-shadow: 0 0 20px #0ff55; }

/* Botón fullscreen futurista */
#fullscreenBtn {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    background: #111827;
    color: #0ff;
    border: 2px solid #0ff;
    padding: 8px 12px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    text-shadow: 0 0 5px #0ff;
    transition: 0.3s;
}
#fullscreenBtn:hover {
    background: #0ff;
    color: #111827;
    box-shadow: 0 0 20px #0ff;
}
</style>
</head>
<body>

<div class="sidebar">
    <button id="btnSpeed" class="active"><i class="fas fa-tachometer-alt"></i></button>
    <button id="btnChart"><i class="fas fa-chart-line"></i></button>
    <button id="btnConfig"><i class="fas fa-cog"></i></button>
    <button id="btnInfo"><i class="fas fa-info-circle"></i></button>
</div>

<div class="content">
    <div class="logo">FDM Racing</div>
    <button id="fullscreenBtn"><i class="fas fa-expand"></i> Fullscreen</button>

    <!-- Dashboard velocímetro + tacómetro -->
    <div id="viewSpeed" class="gauges">
        <canvas id="speedCanvas" width="300" height="300"></canvas>
        <canvas id="rpmCanvas" width="300" height="300"></canvas>
    </div>

    <!-- Gráfico velocidad -->
    <div id="viewChart" class="hidden">
        <canvas id="speedChart" style="width:100%; max-height:400px;"></canvas>
    </div>

    <!-- Configuración -->
    <div id="viewConfig" class="hidden">
        <h2>Configuración</h2>
        <p>Aquí se pueden ajustar unidades, colores, límites y más.</p>
    </div>

    <!-- Información -->
    <div id="viewInfo" class="hidden">
        <h2>Información del sistema</h2>
        <p>Firmware v1.0 - ESP32 Dashboard<br>Fecha: <span id="fecha"></span></p>
    </div>
</div>

<script>
const sections = {
    btnSpeed: "viewSpeed",
    btnChart: "viewChart",
    btnConfig: "viewConfig",
    btnInfo: "viewInfo"
};
Object.keys(sections).forEach(btnId=>{
    document.getElementById(btnId).addEventListener("click", ()=>{
        document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
        document.getElementById(btnId).classList.add("active");
        Object.values(sections).forEach(secId=>document.getElementById(secId).classList.add("hidden"));
        document.getElementById(sections[btnId]).classList.remove("hidden");
    });
});

// Fullscreen
document.getElementById('fullscreenBtn').addEventListener('click', ()=>{
    if(document.documentElement.requestFullscreen){
        document.documentElement.requestFullscreen();
    } else if(document.documentElement.webkitRequestFullscreen){
        document.documentElement.webkitRequestFullscreen();
    } else if(document.documentElement.msRequestFullscreen){
        document.documentElement.msRequestFullscreen();
    }
});

// Función para dibujar gauge neón
function drawGauge(canvasId, value, maxValue, label) {
    const canvas = document.getElementById(canvasId);
    const ctx = canvas.getContext('2d');
    const radius = 120;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.save();
    ctx.translate(canvas.width/2, canvas.height/2);

    // Fondo
    ctx.beginPath();
    ctx.arc(0,0,radius,0,Math.PI*1.5);
    ctx.strokeStyle = '#111';
    ctx.lineWidth = 20;
    ctx.stroke();

    // Gradiente neón
    let endAngle = (value / maxValue) * (Math.PI*1.5);
    ctx.beginPath();
    ctx.arc(0,0,radius,0,endAngle);
    let grad = ctx.createLinearGradient(-radius,0,radius,0);
    grad.addColorStop(0,'#ff0055');
    grad.addColorStop(1,'#00f0ff');
    ctx.strokeStyle = grad;
    ctx.lineWidth = 20;
    ctx.shadowBlur = 20;
    ctx.shadowColor = '#00f0ff';
    ctx.stroke();

    // Valor central
    ctx.fillStyle = '#0ff';
    ctx.font = 'bold 28px Orbitron';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(value,0,0);

    // Label
    ctx.font = '16px Orbitron';
    ctx.fillText(label,0,35);

    ctx.restore();
}

// Chart.js
const ctxChart = document.getElementById('speedChart').getContext('2d');
const speedChart = new Chart(ctxChart,{
    type:'line',
    data:{
        labels:[],
        datasets:[{
            label:'Velocidad (km/h)',
            borderColor:'#0ff',
            backgroundColor:'rgba(0,255,255,0.2)',
            data:[]
        }]
    },
    options:{
        responsive:true,
        animation:false,
        scales:{
            y:{min:0,max:300,ticks:{color:'#0ff'},grid:{color:'#0ff33'}},
            x:{ticks:{color:'#0ff'},grid:{color:'#0ff33'}}
        },
        plugins:{legend:{labels:{color:'#0ff'}}}
    }
});

// Simulación de velocidad y RPM
let time=0;
setInterval(()=>{
    let speed=Math.floor(Math.random()*240);
    let rpm=Math.floor(Math.random()*10000);
    drawGauge('speedCanvas', speed, 240, 'km/h');
    drawGauge('rpmCanvas', rpm, 10000, 'RPM');

    speedChart.data.labels.push(time++);
    speedChart.data.datasets[0].data.push(speed);
    if(speedChart.data.labels.length>20){
        speedChart.data.labels.shift();
        speedChart.data.datasets[0].data.shift();
    }
    speedChart.update();
},1000);

// Fecha en info
document.getElementById('fecha').innerText=new Date().toLocaleDateString();
</script>

</body>
</html>

